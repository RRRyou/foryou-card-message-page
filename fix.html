<!DOCTYPE html>
<html>
<head>
    <title>ç”Ÿæ—¥ç¥ç¦ä¿®å¤ç‰ˆ</title>
    <style>
        body { font-family: Arial; padding: 20px; max-width: 600px; margin: auto; }
        textarea, input, button { width: 100%; margin: 10px 0; padding: 10px; }
        button { background: #4CAF50; color: white; border: none; cursor: pointer; }
        .link { background: #f0f0f0; padding: 10px; margin: 10px 0; word-break: break-all; }
    </style>
</head>
<body>
    <h1>ğŸ‚ ç”Ÿæ—¥ç¥ç¦ç”Ÿæˆå™¨ï¼ˆä¿®å¤ç‰ˆï¼‰</h1>
    
    <textarea id="blessings" rows="5" placeholder="è¾“å…¥ç¥ç¦è¯­ï¼Œæ¯è¡Œä¸€æ¡...">ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚
å¤©å¤©å¼€å¿ƒï¼ğŸ˜Š
ä¸‡äº‹å¦‚æ„ï¼âœ¨</textarea>
    
    <input type="color" id="color" value="#FF6B6B">
    <input type="text" id="title" value="ğŸ‚ ç”Ÿæ—¥å¿«ä¹ï¼">
    
    <button onclick="generate()">ç”Ÿæˆç¥ç¦é¡µé¢</button>
    
    <div id="result" style="display:none;">
        <h3>âœ… ç”ŸæˆæˆåŠŸï¼</h3>
        <p>å¤åˆ¶é“¾æ¥åˆ†äº«ç»™æœ‹å‹ï¼š</p>
        <div class="link" id="generatedLink"></div>
        <button onclick="copyLink()">å¤åˆ¶é“¾æ¥</button>
        <button onclick="testLink()">æµ‹è¯•æ‰“å¼€</button>
    </div>
    
    <script>
        function generate() {
            const blessings = document.getElementById('blessings').value.trim();
            const color = document.getElementById('color').value;
            const title = document.getElementById('title').value.trim();
            
            if (!blessings) {
                alert('è¯·è¾“å…¥ç¥ç¦è¯­');
                return;
            }
            
            // ç”Ÿæˆé¡µé¢ID
            const pageId = 'birthday_' + Date.now();
            
            // å­˜å‚¨æ•°æ®
            const pageData = {
                blessings: blessings,
                color: color,
                title: title,
                timestamp: Date.now()
            };
            
            localStorage.setItem(pageId, JSON.stringify(pageData));
            
            // ç”Ÿæˆæ­£ç¡®çš„é“¾æ¥
            const currentUrl = window.location.href;
            let playerUrl = '';
            
            if (currentUrl.includes('fix.html')) {
                // æ›¿æ¢fix.htmlä¸ºplayer.html
                playerUrl = currentUrl.replace('fix.html', 'player.html');
            } else if (currentUrl.includes('index.html')) {
                // æ›¿æ¢index.htmlä¸ºplayer.html
                playerUrl = currentUrl.replace('index.html', 'player.html');
            } else {
                // å…¶ä»–æƒ…å†µï¼Œç›´æ¥ä½¿ç”¨player.html
                playerUrl = currentUrl.split('/').slice(0, -1).join('/') + '/player.html';
            }
            
            const link = playerUrl + '?id=' + pageId;
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('generatedLink').textContent = link;
            document.getElementById('result').style.display = 'block';
        }
        
        function copyLink() {
            const link = document.getElementById('generatedLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('é“¾æ¥å·²å¤åˆ¶ï¼');
            });
        }
        
        function testLink() {
            const link = document.getElementById('generatedLink').textContent;
            window.open(link, '_blank');
        }
    </script>
</body>
</html>